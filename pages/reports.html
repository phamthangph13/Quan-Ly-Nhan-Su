<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Báo cáo & Thống kê - Hệ thống Quản lý Nhân sự</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/reports.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar will be loaded here via JavaScript -->
        <div id="sidebar-container"></div>

        <div class="main-content">
            <header class="header">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Tìm kiếm báo cáo...">
                </div>
                <div class="header-right">
                    <div class="notification">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </div>
                    <div class="date-time">
                        <span id="current-date">Thứ 2, 01/01/2023</span>
                    </div>
                </div>
            </header>

            <div class="reports-content">
                <div class="page-header">
                    <h1 class="page-title">Báo cáo & Thống kê</h1>
                </div>

                <div class="filter-section">
                    <div class="filter-group">
                        <label for="report-type">Loại báo cáo:</label>
                        <select id="report-type" class="filter-select">
                            <option value="department">Thống kê theo phòng ban</option>
                            <option value="position">Thống kê theo chức vụ</option>
                            <option value="age">Thống kê theo độ tuổi</option>
                            <option value="gender">Thống kê theo giới tính</option>
                            <option value="education">Thống kê theo trình độ</option>
                            <option value="status">Thống kê theo trạng thái</option>
                            <option value="joinDate">Thống kê theo ngày vào làm</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="department-filter">Phòng ban:</label>
                        <select id="department-filter" class="filter-select">
                            <option value="">Tất cả</option>
                            <option value="it">Công nghệ thông tin</option>
                            <option value="hr">Nhân sự</option>
                            <option value="finance">Tài chính</option>
                            <option value="marketing">Marketing</option>
                            <option value="sales">Kinh doanh</option>
                            <option value="production">Sản xuất</option>
                            <option value="rd">R&D</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="time-period">Khoảng thời gian:</label>
                        <select id="time-period" class="filter-select">
                            <option value="all">Tất cả thời gian</option>
                            <option value="current-month">Tháng hiện tại</option>
                            <option value="last-month">Tháng trước</option>
                            <option value="current-quarter">Quý hiện tại</option>
                            <option value="last-quarter">Quý trước</option>
                            <option value="current-year">Năm hiện tại</option>
                            <option value="last-year">Năm trước</option>
                            <option value="custom">Tùy chỉnh</option>
                        </select>
                    </div>
                    <div class="filter-group custom-date-range" id="custom-date-range" style="display: none;">
                        <div class="date-inputs">
                            <div class="date-input">
                                <label for="date-from">Từ ngày:</label>
                                <input type="date" id="date-from">
                            </div>
                            <div class="date-input">
                                <label for="date-to">Đến ngày:</label>
                                <input type="date" id="date-to">
                            </div>
                        </div>
                    </div>
                    <button class="btn primary-btn" id="generate-report-btn">
                        <i class="fas fa-sync"></i> Tạo báo cáo
                    </button>
                </div>

                <div class="report-container">
                    <div class="report-header">
                        <h2 id="report-title">Thống kê nhân sự theo phòng ban</h2>
                        <div class="report-actions">
                            <button class="btn" id="export-pdf">
                                <i class="fas fa-file-pdf"></i> Xuất PDF
                            </button>
                            <button class="btn" id="export-excel">
                                <i class="fas fa-file-excel"></i> Xuất Excel
                            </button>
                            <button class="btn" id="print-report">
                                <i class="fas fa-print"></i> In báo cáo
                            </button>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <h3>Biểu đồ cột</h3>
                            <canvas id="bar-chart"></canvas>
                        </div>
                        <div class="chart-wrapper">
                            <h3>Biểu đồ tròn</h3>
                            <canvas id="pie-chart"></canvas>
                        </div>
                    </div>

                    <div class="report-table-container">
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Phòng ban</th>
                                    <th>Tổng số nhân viên</th>
                                    <th>Nam</th>
                                    <th>Nữ</th>
                                    <th>Quản lý</th>
                                    <th>Nhân viên</th>
                                    <th>Thử việc</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Công nghệ thông tin</td>
                                    <td>28</td>
                                    <td>20</td>
                                    <td>8</td>
                                    <td>4</td>
                                    <td>22</td>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td>Nhân sự</td>
                                    <td>15</td>
                                    <td>5</td>
                                    <td>10</td>
                                    <td>2</td>
                                    <td>12</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td>Tài chính</td>
                                    <td>18</td>
                                    <td>7</td>
                                    <td>11</td>
                                    <td>3</td>
                                    <td>14</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td>Marketing</td>
                                    <td>22</td>
                                    <td>9</td>
                                    <td>13</td>
                                    <td>4</td>
                                    <td>16</td>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td>Kinh doanh</td>
                                    <td>30</td>
                                    <td>16</td>
                                    <td>14</td>
                                    <td>5</td>
                                    <td>23</td>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td>Sản xuất</td>
                                    <td>35</td>
                                    <td>25</td>
                                    <td>10</td>
                                    <td>6</td>
                                    <td>27</td>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td>R&D</td>
                                    <td>12</td>
                                    <td>8</td>
                                    <td>4</td>
                                    <td>2</td>
                                    <td>9</td>
                                    <td>1</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th>Tổng cộng</th>
                                    <th>160</th>
                                    <th>90</th>
                                    <th>70</th>
                                    <th>26</th>
                                    <th>123</th>
                                    <th>11</th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <div class="saved-reports">
                    <h2>Báo cáo đã lưu</h2>
                    <div class="saved-reports-list">
                        <div class="saved-report">
                            <div class="saved-report-info">
                                <i class="fas fa-file-alt"></i>
                                <div class="saved-report-details">
                                    <h3>Thống kê nhân sự theo phòng ban</h3>
                                    <p>Tạo ngày: 15/05/2023</p>
                                </div>
                            </div>
                            <div class="saved-report-actions">
                                <button class="btn view-btn" title="Xem báo cáo">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn download-btn" title="Tải xuống">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="btn delete-btn" title="Xóa">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="saved-report">
                            <div class="saved-report-info">
                                <i class="fas fa-file-alt"></i>
                                <div class="saved-report-details">
                                    <h3>Thống kê nhân sự theo độ tuổi</h3>
                                    <p>Tạo ngày: 10/05/2023</p>
                                </div>
                            </div>
                            <div class="saved-report-actions">
                                <button class="btn view-btn" title="Xem báo cáo">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn download-btn" title="Tải xuống">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="btn delete-btn" title="Xóa">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="saved-report">
                            <div class="saved-report-info">
                                <i class="fas fa-file-alt"></i>
                                <div class="saved-report-details">
                                    <h3>Báo cáo tuyển dụng Q2/2023</h3>
                                    <p>Tạo ngày: 01/05/2023</p>
                                </div>
                            </div>
                            <div class="saved-report-actions">
                                <button class="btn view-btn" title="Xem báo cáo">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn download-btn" title="Tải xuống">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="btn delete-btn" title="Xóa">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for export report preview -->
    <div class="modal" id="export-preview-modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 id="preview-title">Xem trước báo cáo</h2>
                <button class="close-btn" id="close-preview-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <div class="export-option">
                        <label for="include-charts">
                            <input type="checkbox" id="include-charts" checked>
                            Bao gồm biểu đồ
                        </label>
                    </div>
                    <div class="export-option">
                        <label for="include-table">
                            <input type="checkbox" id="include-table" checked>
                            Bao gồm bảng dữ liệu
                        </label>
                    </div>
                    <div class="export-option">
                        <label for="include-summary">
                            <input type="checkbox" id="include-summary" checked>
                            Bao gồm tóm tắt
                        </label>
                    </div>
                    <div class="export-option">
                        <label for="include-header">
                            <input type="checkbox" id="include-header" checked>
                            Bao gồm tiêu đề và logo
                        </label>
                    </div>
                </div>
                <div class="preview-container">
                    <div class="preview-page">
                        <div class="preview-header">
                            <img src="../img/logo.png" alt="Company Logo" class="preview-logo">
                            <div class="preview-header-text">
                                <h3>Công ty TNHH ABC</h3>
                                <p>Báo cáo thống kê nhân sự theo phòng ban</p>
                                <p>Ngày tạo: 16/05/2023</p>
                            </div>
                        </div>
                        <div class="preview-charts">
                            <div class="preview-chart">
                                <h4>Biểu đồ cột</h4>
                                <img src="../img/bar-chart-preview.png" alt="Biểu đồ cột" class="chart-preview">
                            </div>
                            <div class="preview-chart">
                                <h4>Biểu đồ tròn</h4>
                                <img src="../img/pie-chart-preview.png" alt="Biểu đồ tròn" class="chart-preview">
                            </div>
                        </div>
                        <div class="preview-table">
                            <h4>Bảng dữ liệu</h4>
                            <table class="preview-data-table">
                                <thead>
                                    <tr>
                                        <th>Phòng ban</th>
                                        <th>Tổng</th>
                                        <th>Nam</th>
                                        <th>Nữ</th>
                                        <th>Quản lý</th>
                                        <th>Nhân viên</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Công nghệ thông tin</td>
                                        <td>28</td>
                                        <td>20</td>
                                        <td>8</td>
                                        <td>4</td>
                                        <td>24</td>
                                    </tr>
                                    <tr>
                                        <td>Nhân sự</td>
                                        <td>15</td>
                                        <td>5</td>
                                        <td>10</td>
                                        <td>2</td>
                                        <td>13</td>
                                    </tr>
                                    <!-- More rows... -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="form-buttons">
                    <button class="btn" id="previous-page">
                        <i class="fas fa-arrow-left"></i> Trang trước
                    </button>
                    <span class="page-counter">Trang 1/2</span>
                    <button class="btn" id="next-page">
                        Trang sau <i class="fas fa-arrow-right"></i>
                    </button>
                    <button class="btn primary-btn" id="confirm-export">
                        <i class="fas fa-download"></i> Xuất báo cáo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/sidebar-loader.js"></script>
    <script src="../js/reports.js"></script>
</body>
</html> 